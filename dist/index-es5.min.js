"use strict";var __read=this&&this.__read||function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var r,i,a=t.call(n),o=[];try{for(;(void 0===e||0<e--)&&!(r=a.next()).done;)o.push(r.value)}catch(n){i={error:n}}finally{try{r&&!r.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return o},__spreadArray=this&&this.__spreadArray||function(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n};!function(v){function h(){return function(n,e){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");r.classList.add("svg-icon",n),r.setAttribute("width","18"),r.setAttribute("height","18"),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("aria-hidden","true");t=document.createElementNS(t,"path");return t.setAttribute("d",e),r.append(t),r}("iconClear","M15 4.41 13.59 3 9 7.59 4.41 3 3 4.41 7.59 9 3 13.59 4.41 15 9 10.41 13.59 15 15 13.59 10.41 9 15 4.41z")}function m(n,e){var t=n.id;return(n=document.createElement("label")).htmlFor=t,n.textContent=e,n}var t={ids:{chat:{input:"input",anchor:"bubble"},links:{form:"link-form",modal:"link-modal"}},classes:{links:{modal:"link-modal"},styles:{collapsed:"collapsed"}}};!function(n){var e=v.createElement("style");v.head.append(e);var t=e.sheet;t&&(n=(e=n.classes).links,e=e.styles,t.insertRule("\n        :root {\n            --white: #c4c8cc;\n            --black: #2d2d2d;\n            --button-primary: #378ad3;\n        }"),t.insertRule("\n        ."+n.modal+" .iconClear {\n            position: absolute;\n            top: 0;\n            right: 0;\n            margin: 1vh;\n            fill: var(--white);\n        }"),t.insertRule("\n        ."+n.modal+" {\n            position: fixed;\n            top: calc(100% / 3);\n            left: calc(100% / 3);\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            border-radius: 1vh;\n            z-index: 9999;\n            max-width: 50vw;\n            max-height: 25vh;\n            background-color: var(--black);\n            overflow: hidden;\n\n            transition: max-width 0.1s linear, max-height 0.1s linear;\n        }"),t.insertRule("\n        ."+e.collapsed+" {\n            max-width: 0px !important;\n            max-height: 0px !important;\n        }"),t.insertRule("\n        ."+n.modal+" form {\n            padding: 1vh 1vw;\n        }"),t.insertRule("\n        ."+n.modal+" input {\n            box-sizing: border-box;\n            border-radius: 0.5vh;\n            padding: 1vh 1vw;\n            width: 100%;\n            outline: none;\n            background: none;\n            color: var(--white);\n        }"),t.insertRule("\n        ."+n.modal+" label {\n            display: inline-block;\n            margin: 0 0 1vh 0.25vw;\n            color: var(--white);\n            font-size: 0.9rem;\n        }"),t.insertRule("\n        ."+n.modal+" button {\n            height: 4vh;\n            min-width: 8vh;\n            border-radius: 0.5vh 0.5vw;\n            border: none;\n            background-color: rgb(55, 138, 211);\n            color: white;\n        }"),t.insertRule("\n        ."+n.modal+" button:hover {\n          background-color: #3ca4ff;\n        }"),t.insertRule("\n        ."+n.modal+" input {\n            margin-bottom: 1vh;\n        }"))}(t);var r=[{key:"L",ctrl:!0,shift:!1,caseSensitive:!1,action:function(n){var e=n.ids,t=n.classes,r=window.getSelection();if(r){var i=r.anchorNode;if(i&&i.id===e.chat.anchor){var a=t.styles.collapsed,o=v.getElementById(e.links.modal);if(o)return function(n,e,t){var r=n.classList,i=r.contains(t),n=__read(__spreadArray([],__read(n.querySelectorAll("input"))),2);n[0];return n[1].value=e.toString(),i&&r.remove(t)}(o,r,a);var l=v.createElement("div");l.classList.add(t.links.modal,a),l.id="link-modal";var d=h();d.addEventListener("click",function(){l.classList.add(a)});n=v.createElement("form");n.id=e.links.form;var s=v.createElement("input");s.type="text";var c=r.toString(),u=v.createElement("input");u.type="text",u.value=c;i=m(s,"Link"),o=m(u,"Title"),r=(t="Add link",(r=document.createElement("button")).type="button",r.textContent=t,r);r.addEventListener("click",function(){var n="["+u.value+"]("+s.value+")";!function(n,e,t){n=v.getElementById(n);!n||(n.value=n.value.replace(t,e))}(e.chat.input,n,c),l.classList.add(a)}),n.append(i,s,o,u,r),l.append(d,n),v.body.append(l),l.classList.remove(a)}}}}];v.addEventListener("keydown",function(n){var a=n.ctrlKey,o=n.metaKey,l=n.shiftKey,d=n.key,e=r.find(function(n){return e=n,t=o,r=l,i=n.ctrl,e=n.shift,(a===i||t===i)&&r===e&&(r=d,e=n.key,n.caseSensitive?e===r:e.toUpperCase()===r.toUpperCase());var e,t,r,i});e&&(n.preventDefault(),(0,e.action)(t,e))})}((window,document));