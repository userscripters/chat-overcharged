"use strict";(h=>{const r={ids:{chat:{input:"input",anchor:"bubble"},links:{form:"link-form",modal:"link-modal"}},classes:{links:{modal:"link-modal"},styles:{collapsed:"collapsed"}}};const v=()=>((e,t)=>{var n="http://www.w3.org/2000/svg";const i=document.createElementNS(n,"svg");i.classList.add("svg-icon",e),i.setAttribute("width","18"),i.setAttribute("height","18"),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("aria-hidden","true");const o=document.createElementNS(n,"path");return o.setAttribute("d",t),i.append(o),i})("iconClear","M15 4.41 13.59 3 9 7.59 4.41 3 3 4.41 7.59 9 3 13.59 4.41 15 9 10.41 13.59 15 15 13.59 10.41 9 15 4.41z"),p=({id:e},t)=>{const n=document.createElement("label");return n.htmlFor=e,n.textContent=t,n};(e=>{var t=h.createElement("style");h.head.append(t);const{sheet:n}=t;n&&({classes:{links:t,styles:e}}=e,n.insertRule(`
        :root {
            --white: #c4c8cc;
            --black: #2d2d2d;
            --button-primary: #378ad3;
        }`),n.insertRule(`
        .${t.modal} .iconClear {
            position: absolute;
            top: 0;
            right: 0;
            margin: 1vh;
            fill: var(--white);
        }`),n.insertRule(`
        .${t.modal} {
            position: fixed;
            top: calc(100% / 3);
            left: calc(100% / 3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 1vh;
            z-index: 9999;
            max-width: 50vw;
            max-height: 25vh;
            background-color: var(--black);
            overflow: hidden;

            transition: max-width 0.1s linear, max-height 0.1s linear;
        }`),n.insertRule(`
        .${e.collapsed} {
            max-width: 0px !important;
            max-height: 0px !important;
        }`),n.insertRule(`
        .${t.modal} form {
            padding: 1vh 1vw;
        }`),n.insertRule(`
        .${t.modal} input {
            box-sizing: border-box;
            border-radius: 0.5vh;
            padding: 1vh 1vw;
            width: 100%;
            outline: none;
            background: none;
            color: var(--white);
        }`),n.insertRule(`
        .${t.modal} label {
            display: inline-block;
            margin: 0 0 1vh 0.25vw;
            color: var(--white);
            font-size: 0.9rem;
        }`),n.insertRule(`
        .${t.modal} button {
            height: 4vh;
            min-width: 8vh;
            border-radius: 0.5vh 0.5vw;
            border: none;
            background-color: rgb(55, 138, 211);
            color: white;
        }`),n.insertRule(`
        .${t.modal} button:hover {
          background-color: #3ca4ff;
        }`),n.insertRule(`
        .${t.modal} input {
            margin-bottom: 1vh;
        }`))})(r);const s=[{key:"L",ctrl:!0,shift:!1,caseSensitive:!1,action:({ids:t,classes:e})=>{const n=window.getSelection();if(n){var{anchorNode:i}=n;if(i&&i.id===t.chat.anchor){const{styles:{collapsed:o}}=e;i=h.getElementById(t.links.modal);if(i)return((e,t,n)=>{const{classList:i}=e;var o=i.contains(n);const[,a]=[...e.querySelectorAll("input")];return a.value=t.toString(),o&&i.remove(n)})(i,n,o);const a=h.createElement("div");a.classList.add(e.links.modal,o),a.id="link-modal";const l=v();l.addEventListener("click",()=>{a.classList.add(o)});const r=h.createElement("form");r.id=t.links.form;const s=h.createElement("input");s.type="text";const c=n.toString(),d=h.createElement("input");d.type="text",d.value=c;i=p(s,"Link"),e=p(d,"Title");const u=(e=>{const t=document.createElement("button");return t.type="button",t.textContent=e,t})("Add link");u.addEventListener("click",()=>{var e=`[${d.value}](${s.value})`;((e,t,n)=>{const i=h.getElementById(e);!i||(i.value=i.value.replace(n,t))})(t.chat.input,e,c),a.classList.add(o)}),r.append(i,s,e,d,u),a.append(l,r);const{body:m}=h;m.append(a),a.classList.remove(o)}}}}];h.addEventListener("keydown",e=>{const{ctrlKey:t,metaKey:n,shiftKey:i,key:o}=e;var a=s.find(e=>(({ctrl:e,shift:t},n,i,o)=>(n===e||i===e)&&o===t)(e,t,n,i)&&(({key:e,caseSensitive:t},n)=>t?e===n:e.toUpperCase()===n.toUpperCase())(e,o));if(a){e.preventDefault();const{action:l}=a;l(r,a)}})})((window,document));